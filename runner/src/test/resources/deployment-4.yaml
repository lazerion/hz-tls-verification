version: '2'
services:
  hazelcast-client:
    image: client:tls
    depends_on:
        - hazelcast
        - hazelcast-no-ssl
    volumes:
        - ./hz/client:/configFolder
        - ./hz/ks:/ks
    environment:
        - JAVA_OPTS=-Dhazelcast.client.config=/configFolder/hazelcast-client-ssl.xml -Djavax.net.ssl.keyStore=/ks/keystore.jks -Djavax.net.ssl.keyStorePassword=123456
    links:
        - "hazelcast:hazelcast"
        - "hazelcast-no-ssl:hazelcast-no-ssl"
    ports:
        - "5701"

  hazelcast:
    image: hz:tls
    volumes:
        - ./hz/server:/configFolder
        - ./hz/ks:/ks
    environment:
        - JAVA_OPTS=-Dhazelcast.config=/configFolder/hazelcast-ssl.xml -Djavax.net.ssl.keyStore=/ks/keystore.jks -Djavax.net.ssl.keyStorePassword=123456
    ports:
        - "5701"

  hazelcast-no-ssl:
    image: hz:tls
    volumes:
        - ./hz/server:/configFolder
        - ./hz/ks:/ks
    environment:
        - JAVA_OPTS=-Dhazelcast.config=/configFolder/hazelcast-no-ssl.xml -Djavax.net.ssl.keyStore=/ks/keystore.jks -Djavax.net.ssl.keyStorePassword=123456
    ports:
        - "5702"